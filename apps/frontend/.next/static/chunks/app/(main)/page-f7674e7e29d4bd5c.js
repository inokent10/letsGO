(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{62:e=>{e.exports={flagBox:"flag-box_flagBox__vMXU6",flagImage:"flag-box_flagImage__wVv8b",flagContainerStepTwo:"flag-box_flagContainerStepTwo__Ii0mn",hasConnection:"flag-box_hasConnection__V_NRn",isLast:"flag-box_isLast__Rpjp1",flagContainerStepThre:"flag-box_flagContainerStepThre__MykLp",notSelected:"flag-box_notSelected__X7EEg",notSelectedMarker:"flag-box_notSelectedMarker__yFrmU",marker:"flag-box_marker__oQczj",removeButton:"flag-box_removeButton__bT2KX",closeIcon:"flag-box_closeIcon__l_PM1"}},1322:e=>{e.exports={container:"description-inputs_container__NfTum",inputBox:"description-inputs_inputBox__WAIha"}},1812:(e,t,n)=>{"use strict";n.d(t,{C5:()=>l,CZ:()=>d,Et:()=>r,Iy:()=>o,So:()=>a,Vf:()=>g,Yd:()=>u,bc:()=>x,gK:()=>m,n5:()=>i,nY:()=>c,pH:()=>h,q0:()=>s,tu:()=>p});let a=4,r=1,s=0,l=100;var i=function(e){return e.FormPage="/",e.CatalogPage="/catalog",e}(i||{});let o={DIRECTIONS:"НАПРАВЛЕНИЯ",TRAVELERS:"ПОПУТЧИКИ"};var c=function(e){return e.EROUPE="Европа",e.ASIA="Азия",e.AMERICA="Америка",e.ISLANDS="Острова",e}(c||{}),u=function(e){return e.CATALOG="/catalog",e.COUNTRIES="/countries",e.ITINERARY="/itinerary",e}(u||{});let d={BASE_URL:"http://localhost:5001",API_TIMEOUT:5e3},p={ROCK:"Тяжёлый рок",RAP:"Русский рэп",DANCE:"Евроденс"},h={FITNESS:"Спортзал",RAP:"Кальян",LAZYBONE:"Диван"},m={MEAT:"Мясоед",HEALTH:"Сидит на ПП",VEGAN:"Веган-сыроед"},x={AIRPLANE:"Самолёт",CAR:"Автомобиль",BIKE:"Велосипед",NONE:"Пешком"},g=["Australia.svg","Belgium.svg","Bosnia and Herzegovina.svg","Czechia.svg","Dominica.svg","France.svg","Germany.svg","Seychelles.svg","Sri Lanka.svg","Thailand.svg","UK.svg","USA.svg"]},2045:(e,t,n)=>{"use strict";n.d(t,{CU:()=>l,GV:()=>s,jL:()=>r});var a=n(4540);let r=a.wA.withTypes(),s=a.d4.withTypes(),l=a.Pj.withTypes()},2088:e=>{e.exports={inputTripmates:"companions-duration-input_inputTripmates__3p3aO",inputsContainer:"companions-duration-input_inputsContainer__gn8e6",inputRow:"companions-duration-input_inputRow__hPjNB",inputWrapper:"companions-duration-input_inputWrapper__ZH_ZW",labelText:"companions-duration-input_labelText__3BQB7",inputBox:"companions-duration-input_inputBox__xBBTa","inputBox--second":"companions-duration-input_inputBox--second__Fz08c",labelsRow:"companions-duration-input_labelsRow__7TqYc",checkboxChild:"companions-duration-input_checkboxChild__OygDA"}},2466:(e,t,n)=>{"use strict";n.d(t,{NL:()=>l,QP:()=>r,bH:()=>s,p9:()=>i});let a=(e,t)=>{let n=Math.ceil(Math.min(e,t));return Math.floor(Math.random()*(Math.floor(Math.max(e,t))-n+1)+n)},r=e=>e[a(0,e.length-1)],s=e=>e>90?e-3:e,l=(e,t)=>{if(e&&t){let[n,a,r]=e.split("-").map(Number),[s,l,i]=t.split("-").map(Number),o=new Date(n,a-1,r);return Math.floor((new Date(s,l-1,i).getTime()-o.getTime())/864e5)+1}return 0},i=(e,t)=>(t=t.map(e=>"Острова"===e?"Океания":e),Array.from({length:32},(e,t)=>String.fromCharCode(1072+t)).reduce((n,a)=>{let r=e.filter(e=>e.name.toLowerCase().startsWith(a)&&t.includes(e.location));return n.push([a,r]),n},[]))},3296:e=>{e.exports={alphabetFilter:"alphabet-filter_alphabetFilter__UAbcG",letterButton:"alphabet-filter_letterButton__Q1fGE",active:"alphabet-filter_active__dwcmq"}},3840:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>et});var a=n(5155),r=n(2115),s=n(5695),l=n(1812);let i=["ДАТЫ","МАРШРУТ","РАЗВЛЕЧЕНИЯ"];var o=n(4369),c=n.n(o),u=n(7542),d=n.n(u),p=n(2466);function h(e){let{handler:t,flag:n}=e;return(0,a.jsxs)("button",{className:"".concat(d().nextButton," ").concat(n?d().disabledButton:""),onClick:t,disabled:n,children:["Следующий шаг",(0,a.jsx)("img",{src:"/Polygon_next.svg",alt:"arrow"})]})}function m(e){let{handler:t}=e;return(0,a.jsxs)("button",{className:d().prevButton,onClick:t,children:[(0,a.jsx)("img",{src:"/Polygon_prev.svg",alt:"arrow"}),"На шаг назад"]})}function x(e){let{handler:t,flag:n}=e;return(0,a.jsxs)("button",{className:d().nextButton,onClick:t,disabled:n,children:["Отправить",(0,a.jsx)("img",{src:"/Polygon_next.svg",alt:"arrow"})]})}let g=function(e){let{handlerNextStep:t,handlerPrevStep:n,handlerSubmit:r,firstStep:s,lastStep:l,formData:i,isSubmitting:o}=e,{startDate:c,finishDate:u,tripDuration:g,tripmatesCount:_,itinerary:f}=i,v=(0,p.NL)(i.startDate,i.finishDate)!==i.tripDuration,j=""===c||""===u||0===g||0===_||v;return(0,a.jsxs)("div",{className:"".concat(d().buttonWrapper," ").concat(v?d().errorSpan:""),children:[v&&!i.tripDuration&&(0,a.jsx)("span",{children:"дата и длительность должны совпадать"}),s&&(0,a.jsx)(h,{handler:t,flag:j}),!s&&!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{handler:t,flag:f.length<1}),(0,a.jsx)(m,{handler:n})]}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{handler:r,flag:o}),(0,a.jsx)(m,{handler:n})]})]})};n(8310);let _=function(e){let{selectedDate:t,onDateSelect:n,events:s={},startDate:l,finishDate:i}=e,[o,c]=(0,r.useState)(new Date),u=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),d=e=>{let t=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===t?6:t-1},p=e=>{let t=new Date;t.setDate(t.getDate()+1),t.setHours(0,0,0,0),!(e<t)&&n&&n(e)},h=e=>{let t=new Date;return t.getDate()===e&&t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()},m=e=>!!t&&t.getDate()===e&&t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear(),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!l||!i)return!1;let n=new Date(o.getFullYear(),o.getMonth()+t,e),[a,r,s]=l.split("-").map(Number),c=new Date(a,r-1,s),[u,d,p]=i.split("-").map(Number),h=new Date(u,d-1,p);return n>=c&&n<=h},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!l)return!1;let n=new Date(o.getFullYear(),o.getMonth()+t,e),[a,r,s]=l.split("-").map(Number),i=new Date(a,r-1,s);return n.getTime()===i.getTime()},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!i)return!1;let n=new Date(o.getFullYear(),o.getMonth()+t,e),[a,r,s]=i.split("-").map(Number),l=new Date(a,r-1,s);return n.getTime()===l.getTime()},f=e=>{let t=new Date(o.getFullYear(),o.getMonth(),e).getDay();return 0===t||6===t},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date(o.getFullYear(),o.getMonth()+t,e),a=n.getFullYear(),r=n.getMonth()+1,l=n.getDate();for(let e of["".concat(a,"-").concat(r,"-").concat(l),"".concat(a,"-").concat(r.toString().padStart(2,"0"),"-").concat(l.toString().padStart(2,"0")),"".concat(r,"-").concat(l),"".concat(r.toString().padStart(2,"0"),"-").concat(l.toString().padStart(2,"0"))])if(s[e])return s[e];return null};return(0,a.jsxs)("div",{className:"calendar",children:[(0,a.jsxs)("div",{className:"calendar-header",children:[(0,a.jsx)("button",{className:"nav-button",onClick:()=>{c(new Date(o.getFullYear(),o.getMonth()-1))},children:"‹"}),(0,a.jsxs)("h2",{className:"month-year",children:[["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][o.getMonth()]," ",o.getFullYear()]}),(0,a.jsx)("button",{className:"nav-button",onClick:()=>{c(new Date(o.getFullYear(),o.getMonth()+1))},children:"›"})]}),(0,a.jsx)("div",{className:"calendar-weekdays",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,a.jsx)("div",{className:"weekday",children:e},e))}),(0,a.jsx)("div",{className:"calendar-grid",children:(()=>{let e=u(o),t=d(o),n=[],r=new Date(o.getFullYear(),o.getMonth()-1),s=new Date(o.getFullYear(),o.getMonth()+1),l=u(r),i=new Date;i.setDate(i.getDate()+1),i.setHours(0,0,0,0);for(let e=t-1;e>=0;e--){let t=l-e,s=new Date(r.getFullYear(),r.getMonth(),t),o=s<i,c=x(t,-1),u=g(t,-1),d=_(t,-1),h=v(t,-1);n.push((0,a.jsxs)("div",{className:"calendar-day prev-month ".concat(o?"past-date":""," ").concat(c?"in-range":""," ").concat(u?"range-start":""," ").concat(d?"range-end":""," ").concat(h?"has-event":""),onClick:()=>!o&&p(s),children:[(0,a.jsx)("span",{className:"day-number",children:t}),h&&(0,a.jsx)("span",{className:"event-text",children:h})]},"prev-".concat(t)))}for(let t=1;t<=e;t++){let e=v(t,0),r=new Date(o.getFullYear(),o.getMonth(),t),s=r<i,l=x(t,0),c=g(t,0),u=_(t,0);n.push((0,a.jsxs)("div",{className:"calendar-day current-month ".concat(h(t)?"today":""," ").concat(m(t)?"selected":""," ").concat(f(t)?"weekend":""," ").concat(e?"has-event":""," ").concat(s?"past-date":""," ").concat(l?"in-range":""," ").concat(c?"range-start":""," ").concat(u?"range-end":""),onClick:()=>!s&&p(r),children:[(0,a.jsx)("span",{className:"day-number",children:t}),e&&(0,a.jsx)("span",{className:"event-text",children:e})]},t))}let c=7*Math.ceil((t+e)/7)-(t+e);for(let e=1;e<=c;e++){let t=new Date(s.getFullYear(),s.getMonth(),e),r=t<i,l=x(e,1),o=g(e,1),c=_(e,1),u=v(e,1);n.push((0,a.jsxs)("div",{className:"calendar-day next-month ".concat(r?"past-date":""," ").concat(l?"in-range":""," ").concat(o?"range-start":""," ").concat(c?"range-end":""," ").concat(u?"has-event":""),onClick:()=>!r&&p(t),children:[(0,a.jsx)("span",{className:"day-number",children:e}),u&&(0,a.jsx)("span",{className:"event-text",children:u})]},"next-".concat(e)))}return n})()})]})};var f=n(7936),v=n.n(f);let j=function(e){let{activePoint:t}=e;return(0,a.jsx)("ul",{className:v().points,children:i.map(e=>(0,a.jsx)("li",{className:e===t?v().isActive:"",children:e},e))})};var N=n(2088),y=n.n(N);let b=function(e){let{tripDuration:t,tripmatesCount:n,onChangeDuration:r,onChangeTrimates:s}=e;return(0,a.jsxs)("div",{className:y().inputsContainer,children:[(0,a.jsx)("div",{className:y().inputRow,children:(0,a.jsxs)("div",{className:y().inputWrapper,children:[(0,a.jsx)("span",{className:y().labelText,children:"ИЩУ ПОПУТЧИКОВ:"}),(0,a.jsxs)("div",{className:y().inputBox,children:[(0,a.jsx)("button",{type:"button",onClick:()=>{n>0&&s(n-1)},disabled:n<=0,children:"-"}),(0,a.jsx)("input",{type:"number",name:"tripmates",value:n,max:999,min:0,onFocus:e=>{e.target.select()},onChange:e=>{let t=e.target.value;if(""===t)return void s(0);let n=Number(t);!isNaN(n)&&n>=0&&n<=999&&s(n)}}),(0,a.jsx)("button",{type:"button",onClick:()=>{n<999&&s(n+1)},disabled:n>=999,children:"+"})]}),(0,a.jsx)("span",{className:y().labelText,children:"чел."})]})}),(0,a.jsx)("div",{className:y().inputRow,children:(0,a.jsxs)("div",{className:y().inputWrapper,children:[(0,a.jsx)("span",{className:y().labelText,children:"ДЛИТЕЛЬНОСТЬ:"}),(0,a.jsxs)("div",{className:"".concat(y().inputBox," ").concat(y()["inputBox--second"]),children:[(0,a.jsx)("button",{type:"button",onClick:()=>{t>0&&r(t-1)},disabled:t<=0,children:"-"}),(0,a.jsx)("input",{type:"number",name:"duration",value:t,max:999,min:0,onFocus:e=>{e.target.select()},onChange:e=>{let t=e.target.value;if(""===t)return void r(0);let n=Number(t);!isNaN(n)&&n>=0&&n<=999&&r(n)}}),(0,a.jsx)("button",{type:"button",onClick:()=>{t<999&&r(t+1)},disabled:t>=999,children:"+"})]}),(0,a.jsx)("span",{className:y().labelText,children:"дн."})]})})]})},C=function(e){let{tripDuration:t,tripmatesCount:n,isChildrenAccepted:r,updateFormData:s}=e,l=e=>{s({isChildrenAccepted:e})};return(0,a.jsxs)("div",{className:y().inputTripmates,children:[(0,a.jsx)(b,{tripDuration:t,tripmatesCount:n,onChangeDuration:e=>{s({tripDuration:e})},onChangeTrimates:e=>{s({tripmatesCount:e})}}),(0,a.jsx)("div",{className:y().checkboxChild,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",name:"children",checked:r,onChange:e=>l(e.target.checked)}),"Можно с детьми"]})})]})},D=function(e){let{currentPoint:t,formData:n,updateFormData:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:c().titleWrapper,children:[(0,a.jsxs)("div",{className:c().titleBox,children:[(0,a.jsx)("h1",{className:c().stepTitle,children:"Шаг 1. Даты пребывания"}),(0,a.jsxs)("p",{className:c().stepDescription,children:["Укажите предпочтительное количество попутчиков, которых",(0,a.jsx)("br",{}),"вы хотели бы позвать в поездку, и ее предполагаемую длительность."]})]}),(0,a.jsx)(j,{activePoint:t})]}),(0,a.jsx)(C,{isChildrenAccepted:n.isChildrenAccepted,tripDuration:n.tripDuration,tripmatesCount:n.tripmatesCount,updateFormData:r}),(0,a.jsx)(_,{events:(()=>{let e={};if(n.startDate){let[t,a,r]=n.startDate.split("-").map(Number);e["".concat(t,"-").concat(a,"-").concat(r)]="Заезд"}if(n.finishDate){let[t,a,r]=n.finishDate.split("-").map(Number);e["".concat(t,"-").concat(a,"-").concat(r)]="Выезд"}return e})(),onDateSelect:e=>{let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(a,"-").concat(s);if(n.startDate){let[t,a,s]=n.startDate.split("-").map(Number);e<new Date(t,a-1,s)||n.finishDate?r({startDate:l,finishDate:""}):r({finishDate:l})}else r({startDate:l,finishDate:""})},selectedDate:(()=>{if(n.startDate){let[e,t,a]=n.startDate.split("-").map(Number);return new Date(e,t-1,a)}})(),startDate:n.startDate,finishDate:n.finishDate})]})};var w=n(2045),S=n(8435),T=n(4167),B=n(6380),E=n.n(B),A=n(3296),P=n.n(A);let F=["А","Б","В","Г","Д","Е","З","И","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ч","Ш","Э","Ю","Я"],L=function(e){let{selectedLetter:t,onLetterSelect:n}=e;return(0,a.jsx)("div",{className:P().alphabetFilter,children:F.map(e=>(0,a.jsx)("button",{className:"".concat(P().letterButton," ").concat(t===e?P().active:""),onClick:()=>n(t===e?"":e),type:"button",children:e},e))})};var M=n(6945),R=n.n(M),I=n(62),k=n.n(I),Y=n(9300),O=n.n(Y);let W=function(e){let{countryName:t,position:n,handleRemoveCountry:r,currentPoint:s,hasNextItem:l,isLast:o}=e,c=O()({[k().flagContainerStepTwo]:s===i[1],[k().flagContainerStepThre]:s===i[2]&&s!==i[1]},{[k().hasConnection]:l,[k().isLast]:o});return(0,a.jsxs)("div",{className:c,children:[s===i[2]&&(0,a.jsx)("label",{htmlFor:"".concat(n),children:t}),""!==t&&(0,a.jsxs)("div",{className:k().flagBox,children:[(0,a.jsx)("div",{className:k().marker}),(0,a.jsx)("img",{className:k().flagImage,src:"https://flagcdn.com/un.svg",alt:"Флаг ".concat(t)})]}),s===i[1]&&(0,a.jsxs)("div",{className:"".concat(""===t?k().notSelected:""),children:[""===t&&(0,a.jsx)("div",{className:"".concat(k().notSelectedMarker)}),(0,a.jsx)("button",{className:k().removeButton,onClick:r,type:"button",title:"Удалить выбранную страну",children:(0,a.jsxs)("svg",{className:k().closeIcon,width:"26px",height:"28px",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("line",{x1:"16",y1:"16",x2:"48",y2:"48"}),(0,a.jsx)("line",{x1:"48",y1:"16",x2:"16",y2:"48"})]})})]})]})},U=function(e){let{selectedCountry:t,handleToggleOpen:n,handleRemoveCountry:r,placeholder:s,currentPoint:l,hasNextItem:i,isLast:o,position:c}=e;return(0,a.jsxs)("div",{className:R().inputContainer,children:[(0,a.jsxs)("button",{className:R().input,onClick:n,type:"button",children:[t?(0,a.jsx)("div",{className:R().selectedCountry,children:(0,a.jsx)("span",{className:R().name,children:t.name})}):(0,a.jsx)("span",{className:R().placeholder,children:s}),(0,a.jsx)("span",{className:R().arrow,children:"▼"})]}),(0,a.jsx)(W,{countryName:t?t.name:"",handleRemoveCountry:r,currentPoint:l,hasNextItem:i,isLast:o,position:c})]})},z=function(e){let{handleOpenClose:t,index:n}=e;return(0,a.jsx)("button",{className:R().closeButton,onClick:()=>t(n,!1),type:"button",children:"\xd7"})},G=function(e){let{country:t,handleCountrySelect:n}=e;return(0,a.jsx)("button",{className:R().countryItem,onClick:()=>n(t),type:"button",children:(0,a.jsx)("span",{className:R().name,children:t.name})},t.name)},H=function(e){let{countries:t,selectedCountry:n,onSelect:s,onRemove:l,placeholder:i="Выберите страну",isOpen:o,onOpenClose:c,currentPoint:u,hasNextItem:d,isLast:p,position:h}=e,[m,x]=(0,r.useState)(""),[g,_]=(0,r.useState)(""),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=null==t?void 0:t.filter(e=>{var t,n;let a=null==(t=e.name)?void 0:t.toLowerCase().includes(m.toLowerCase()),r=!g||(null==(n=e.name)?void 0:n.startsWith(g));return a&&r}),j=e=>{s(e),c(!1),x(""),_("")};return(0,a.jsxs)("div",{className:E().dropdown,ref:f,children:[(0,a.jsx)(U,{handleToggleOpen:()=>{c(!o)},handleRemoveCountry:()=>{l()},placeholder:i,selectedCountry:n,currentPoint:u,hasNextItem:d,isLast:p,position:h}),o&&(0,a.jsxs)("div",{className:E().dropdownContent,children:[(0,a.jsxs)("div",{className:E().header,children:[(0,a.jsx)("h3",{className:E().title,children:"ВЫБЕРИТЕ СТРАНУ"}),(0,a.jsx)(z,{handleOpenClose:()=>c(!1),index:h})]}),(0,a.jsxs)("div",{className:E().countryBox,children:[(0,a.jsx)(L,{selectedLetter:g,onLetterSelect:_}),(0,a.jsx)("div",{className:E().countriesList,children:null==v?void 0:v.map(e=>(0,a.jsx)(G,{country:e,handleCountrySelect:j},e.name))})]})]})]})},q=function(e){let{onCountriesChange:t,countries:n,currentPoint:s,initialItinerary:l=[]}=e,[i,o]=(0,r.useState)([null]),[c,u]=(0,r.useState)([!1]),[d,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(l&&l.length>0&&!d){let e=[...l];e.push(null),o(e),u(Array(e.length).fill(!1)),p(!0)}},[l,d]);let h=(e,n)=>{let a=[...i];a[n]={country:e.name,position:n+1},a.every(e=>null!==e)&&(a.push(null),u(e=>[...e,!1])),o(a);let r=a.filter(e=>null!==e);null==t||t(r)},m=e=>{let n=[...i];for(n[e]=null;n.length>1&&null===n[n.length-1];)n.pop();n.some(e=>null!==e)||0!==n.length||n.push(null),0===n.length&&n.push(null);let a=n.map((e,t)=>e?{...e,position:t+1}:null);o(a),u(e=>e.slice(0,a.length));let r=a.filter(e=>null!==e);null==t||t(r)},x=(e,t)=>{u(n=>{let a=[...n];return a[e]=t,a})},g=e=>{let t=i.map((t,n)=>n!==e?null==t?void 0:t.country:null).filter(Boolean);return null==n?void 0:n.filter(e=>!t.includes(e.name))},_=e=>{let t=i[e];if(t)return null==n?void 0:n.find(e=>e.name===t.country)};return(0,a.jsx)("div",{className:E().container,children:i.map((e,t)=>(0,a.jsx)(H,{countries:g(t),selectedCountry:_(t),onSelect:e=>h(e,t),onRemove:()=>m(t),placeholder:0===t?"Выберите страну":"Добавить еще страну",currentPoint:s,position:t+1,isOpen:c[t]||!1,onOpenClose:e=>x(t,e),hasNextItem:t<i.length-1,isLast:t===i.length-2},t))})},V=function(e){let{currentPoint:t,countries:n,updateFormData:r,formData:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:c().titleWrapper,children:[(0,a.jsxs)("div",{className:c().titleBox,children:[(0,a.jsx)("h1",{className:c().stepTitle,children:"Шаг 2. Маршрут"}),(0,a.jsxs)("p",{className:c().stepDescription,children:["Укажите страны, которые вы хотели бы посетить.",(0,a.jsx)("br",{}),"Это может быть одна или сразу несколько."]})]}),(0,a.jsx)(j,{activePoint:t})]}),(0,a.jsx)(q,{onCountriesChange:e=>{r({itinerary:e})},countries:n,currentPoint:t,initialItinerary:s.itinerary})]})};var K=n(1322),X=n.n(K);let Z=function(e){let{itinerary:t,currentPoint:n,hasNextItem:r,isLast:s,onDescriptionChange:l}=e;return(0,a.jsx)("div",{className:X().container,children:(0,a.jsxs)("div",{className:X().inputBox,children:[(0,a.jsx)(W,{countryName:t.country,position:t.position,currentPoint:n,hasNextItem:r,isLast:s}),(0,a.jsx)("textarea",{placeholder:"План действий",name:"description",id:"".concat(t.position),minLength:1,maxLength:500,value:t.description||"",onChange:e=>{let n=e.target.value;l(t.position,n)}})]})})},Q=function(e){let{itineraries:t,currentPoint:n,updateFormData:r}=e,s=(e,n)=>{r({itinerary:t.map(t=>t.position===e?{...t,description:n}:t)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:c().titleWrapper,children:[(0,a.jsxs)("div",{className:c().titleBox,children:[(0,a.jsx)("h1",{className:c().stepTitle,children:"Шаг 3. Развлечения"}),(0,a.jsxs)("p",{className:c().stepDescription,children:["Наконец, расскажите о своих планах времяпровождения.",(0,a.jsx)("br",{}),"Можно писать в свободной форме и ставить тэги."]})]}),(0,a.jsx)(j,{activePoint:n})]}),t.map((e,r)=>(0,a.jsx)(Z,{itinerary:e,currentPoint:n,hasNextItem:r<t.length-1,isLast:r===t.length-1,onDescriptionChange:s},"".concat(e.position,"-").concat(t.length)))]})};var J=n(8102);let $={tripmatesCount:0,tripDuration:0,isChildrenAccepted:!1,startDate:"",finishDate:"",itinerary:[]},ee=function(){let e=(0,s.useRouter)(),t=(0,w.CU)(),n=(0,w.jL)(),[o,u]=(0,r.useState)(!1),[d,p]=(0,r.useState)($),[h,m]=(0,r.useState)(i[0]),x=i.indexOf(h),_=x===i.length-1,f=(0,w.GV)(S.X6);(0,r.useEffect)(()=>{f||1!==x||t.dispatch((0,T.EE)())});let v=e=>{p(t=>({...t,...e}))},j=async()=>{try{u(!0);let[,t]=await Promise.all([n((0,J.w4)(d)),n((0,T.Le)(d))]);T.Le.fulfilled.match(t)?e.push(l.n5.CatalogPage):console.error("Ошибка при отправке данных маршрута:",t.error)}catch(e){console.error("Неожиданная ошибка при отправке формы:",e)}finally{u(!1)}};return(0,a.jsx)("div",{className:c().formLayout,children:(0,a.jsxs)("div",{className:c().formWrapper,children:[(()=>{switch(x){case 0:return(0,a.jsx)(D,{updateFormData:v,formData:d,currentPoint:h});case 1:return(0,a.jsx)(V,{updateFormData:v,countries:f,currentPoint:h,formData:d});case 2:return(0,a.jsx)(Q,{itineraries:d.itinerary,currentPoint:h,updateFormData:v});default:return null}})(),(0,a.jsx)(g,{handlerNextStep:()=>{x<i.length-1&&m(i[x+1])},handlerPrevStep:()=>{x>0&&m(i[x-1])},handlerSubmit:j,firstStep:0===x,lastStep:_,formData:d,isSubmitting:o})]})})},et=function(){return(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsx)("h1",{className:"title-form",children:"Добавить палан:"}),(0,a.jsx)(ee,{})]})}},4167:(e,t,n)=>{"use strict";n.d(t,{EE:()=>s,Le:()=>o,To:()=>i,Tr:()=>l});var a=n(6439),r=n(1812);let s=(0,a.zD)("uploadCountires",async(e,t)=>{let{extra:n}=t,{data:a}=await n.get(r.Yd.COUNTRIES);return a}),l=(0,a.zD)("uploadMoreUserCards",async(e,t)=>{let{extra:n}=t,{data:a}=await n.get(r.Yd.CATALOG,{params:{...e}});return a}),i=(0,a.zD)("uploadPageUserCards",async(e,t)=>{let{extra:n}=t,{data:a}=await n.get(r.Yd.CATALOG,{params:{...e}});return a}),o=(0,a.zD)("sendItineraryPlan",async(e,t)=>{let{extra:n}=t,{data:a}=await n.post(r.Yd.ITINERARY,e);return a})},4369:e=>{e.exports={container:"form-steps_container__RJHFv",formLayout:"form-steps_formLayout__CF_EN",formWrapper:"form-steps_formWrapper__0zmUu",titleBox:"form-steps_titleBox__GCZRV",stepTitle:"form-steps_stepTitle__vlWaH",stepDescription:"form-steps_stepDescription__0NdYS",titleWrapper:"form-steps_titleWrapper__Fpx7r"}},5522:(e,t,n)=>{Promise.resolve().then(n.bind(n,3840))},5695:(e,t,n)=>{"use strict";var a=n(8999);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},6380:e=>{e.exports={container:"select-country-input_container__LHjym",dropdown:"select-country-input_dropdown__NlXz_",dropdownContent:"select-country-input_dropdownContent__xK05W",header:"select-country-input_header__9yUWR",title:"select-country-input_title__J1s2s",countryBox:"select-country-input_countryBox__8ui_g",countriesList:"select-country-input_countriesList__FX4zF"}},6945:e=>{e.exports={closeButton:"buttons_closeButton__l3OLh",inputContainer:"buttons_inputContainer__AS36G",input:"buttons_input__FPbLh",selectedCountry:"buttons_selectedCountry__lT4y0",placeholder:"buttons_placeholder__raNdm",name:"buttons_name__P660_",arrow:"buttons_arrow__D60Ho",countryItem:"buttons_countryItem__Uyl_O"}},7542:e=>{e.exports={buttonWrapper:"buttons-form_buttonWrapper__1fPza",nextButton:"buttons-form_nextButton__r1ELz",prevButton:"buttons-form_prevButton___mKFO",disabledButton:"buttons-form_disabledButton__IRu_4",errorSpan:"buttons-form_errorSpan__DprG0"}},7936:e=>{e.exports={points:"points_points__ysMGn",isActive:"points_isActive__E0EhW"}},8102:(e,t,n)=>{"use strict";n.d(t,{Ph:()=>i,Wg:()=>c,w4:()=>o});var a=n(6439),r=n(4167),s=n(1812);let l={countries:null,userCards:null,itineraryPlan:null,query:{page:s.Et,limit:s.So,count:s.So}},i=(0,a.Z0)({name:"TRIPMATES",initialState:l,reducers:{saveItineraryPlan:(e,t)=>{e.itineraryPlan=t.payload,e.query={...e.query,country:t.payload.itinerary.map(e=>e.country)}},saveQuery:(e,t)=>{e.query={...e.query,...t.payload}}},extraReducers(e){e.addCase(r.EE.fulfilled,(e,t)=>{e.countries=t.payload}).addCase(r.Tr.fulfilled,(e,t)=>{e.userCards&&t.payload.currentPage!==s.Et?e.userCards={...t.payload,entities:[...e.userCards.entities,...t.payload.entities]}:e.userCards=t.payload}).addCase(r.To.fulfilled,(e,t)=>{e.userCards=t.payload}).addCase(r.Le.fulfilled,(e,t)=>{e.userCards=t.payload})}}),{saveItineraryPlan:o,saveQuery:c}=i.actions},8310:()=>{},8435:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>s,X6:()=>a,k:()=>r,lo:()=>l});let a=e=>e.TRIPMATES.countries,r=e=>e.TRIPMATES.userCards,s=e=>e.TRIPMATES.query,l=e=>{var t;return null==(t=e.TRIPMATES.userCards)?void 0:t.entities}},9300:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=s(t,n));return t}(n)))}return e}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=(function(){return r}).apply(t,[]))||(e.exports=n)}()}},e=>{var t=t=>e(e.s=t);e.O(0,[256,722,441,684,358],()=>t(5522)),_N_E=e.O()}]);