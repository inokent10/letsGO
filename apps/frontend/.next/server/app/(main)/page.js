(()=>{var e={};e.id=619,e.ids=[619],e.modules={353:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>a,X6:()=>r,k:()=>s,lo:()=>i});let r=e=>e.TRIPMATES.countries,s=e=>e.TRIPMATES.userCards,a=e=>e.TRIPMATES.query,i=e=>e.TRIPMATES.userCards?.entities},363:(e,t,n)=>{Promise.resolve().then(n.bind(n,8444))},451:(e,t,n)=>{Promise.resolve().then(n.bind(n,7299))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1073:(e,t,n)=>{"use strict";n.d(t,{EE:()=>a,Le:()=>o,To:()=>l,Tr:()=>i});var r=n(8198),s=n(6486);let a=(0,r.zD)("uploadCountires",async(e,{extra:t})=>{let{data:n}=await t.get(s.Yd.COUNTRIES);return n}),i=(0,r.zD)("uploadMoreUserCards",async(e,{extra:t})=>{let{data:n}=await t.get(s.Yd.CATALOG,{params:{...e}});return n}),l=(0,r.zD)("uploadPageUserCards",async(e,{extra:t})=>{let{data:n}=await t.get(s.Yd.CATALOG,{params:{...e}});return n}),o=(0,r.zD)("sendItineraryPlan",async(e,{extra:t})=>{let{data:n}=await t.post(s.Yd.ITINERARY,e);return n})},1237:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u});var r=n(5239),s=n(8088),a=n(8170),i=n.n(a),l=n(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);n.d(t,o);let u={children:["",{children:["(main)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,8444)),"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,9559)),"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5284,23)),"next/dist/client/components/unauthorized-error"]}]},{"not-found":[()=>Promise.resolve().then(n.t.bind(n,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/page.tsx"],d={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(main)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1348:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6444,23)),Promise.resolve().then(n.t.bind(n,6042,23)),Promise.resolve().then(n.t.bind(n,8170,23)),Promise.resolve().then(n.t.bind(n,9477,23)),Promise.resolve().then(n.t.bind(n,9345,23)),Promise.resolve().then(n.t.bind(n,2089,23)),Promise.resolve().then(n.t.bind(n,6577,23)),Promise.resolve().then(n.t.bind(n,1307,23))},1426:e=>{e.exports={closeButton:"buttons_closeButton__l3OLh",inputContainer:"buttons_inputContainer__AS36G",input:"buttons_input__FPbLh",selectedCountry:"buttons_selectedCountry__lT4y0",placeholder:"buttons_placeholder__raNdm",name:"buttons_name__P660_",arrow:"buttons_arrow__D60Ho",countryItem:"buttons_countryItem__Uyl_O"}},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},1821:e=>{e.exports={buttonWrapper:"buttons-form_buttonWrapper__1fPza",nextButton:"buttons-form_nextButton__r1ELz",prevButton:"buttons-form_prevButton___mKFO",disabledButton:"buttons-form_disabledButton__IRu_4",errorSpan:"buttons-form_errorSpan__DprG0"}},2412:e=>{"use strict";e.exports=require("assert")},2837:e=>{e.exports={container:"description-inputs_container__NfTum",inputBox:"description-inputs_inputBox__WAIha"}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3335:e=>{e.exports={points:"points_points__ysMGn",isActive:"points_isActive__E0EhW"}},3594:e=>{e.exports={container:"form-steps_container__RJHFv",formLayout:"form-steps_formLayout__CF_EN",formWrapper:"form-steps_formWrapper__0zmUu",titleBox:"form-steps_titleBox__GCZRV",stepTitle:"form-steps_stepTitle__vlWaH",stepDescription:"form-steps_stepDescription__0NdYS",titleWrapper:"form-steps_titleWrapper__Fpx7r"}},3873:e=>{"use strict";e.exports=require("path")},3946:()=>{},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4735:e=>{"use strict";e.exports=require("events")},4850:(e,t,n)=>{"use strict";n.d(t,{NL:()=>i,QP:()=>s,bH:()=>a,p9:()=>l});let r=(e,t)=>{let n=Math.ceil(Math.min(e,t));return Math.floor(Math.random()*(Math.floor(Math.max(e,t))-n+1)+n)},s=e=>e[r(0,e.length-1)],a=e=>e>90?e-3:e,i=(e,t)=>{if(e&&t){let[n,r,s]=e.split("-").map(Number),[a,i,l]=t.split("-").map(Number),o=new Date(n,r-1,s);return Math.floor((new Date(a,i-1,l).getTime()-o.getTime())/864e5)+1}return 0},l=(e,t)=>(t=t.map(e=>"Острова"===e?"Океания":e),Array.from({length:32},(e,t)=>String.fromCharCode(1072+t)).reduce((n,r)=>{let s=e.filter(e=>e.name.toLowerCase().startsWith(r)&&t.includes(e.location));return n.push([r,s]),n},[]))},5264:(e,t,n)=>{"use strict";n.d(t,{Ph:()=>l,Wg:()=>u,w4:()=>o});var r=n(8198),s=n(1073),a=n(6486);let i={countries:null,userCards:null,itineraryPlan:null,query:{page:a.Et,limit:a.So,count:a.So}},l=(0,r.Z0)({name:"TRIPMATES",initialState:i,reducers:{saveItineraryPlan:(e,t)=>{e.itineraryPlan=t.payload,e.query={...e.query,country:t.payload.itinerary.map(e=>e.country)}},saveQuery:(e,t)=>{e.query={...e.query,...t.payload}}},extraReducers(e){e.addCase(s.EE.fulfilled,(e,t)=>{e.countries=t.payload}).addCase(s.Tr.fulfilled,(e,t)=>{e.userCards&&t.payload.currentPage!==a.Et?e.userCards={...t.payload,entities:[...e.userCards.entities,...t.payload.entities]}:e.userCards=t.payload}).addCase(s.To.fulfilled,(e,t)=>{e.userCards=t.payload}).addCase(s.Le.fulfilled,(e,t)=>{e.userCards=t.payload})}}),{saveItineraryPlan:o,saveQuery:u}=l.actions},5356:(e,t,n)=>{Promise.resolve().then(n.bind(n,6695))},5471:(e,t,n)=>{"use strict";n.d(t,{CU:()=>i,GV:()=>a,jL:()=>s});var r=n(4864);let s=r.wA.withTypes(),a=r.d4.withTypes(),i=r.Pj.withTypes()},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5955:e=>{e.exports={inputTripmates:"companions-duration-input_inputTripmates__3p3aO",inputsContainer:"companions-duration-input_inputsContainer__gn8e6",inputRow:"companions-duration-input_inputRow__hPjNB",inputWrapper:"companions-duration-input_inputWrapper__ZH_ZW",labelText:"companions-duration-input_labelText__3BQB7",inputBox:"companions-duration-input_inputBox__xBBTa","inputBox--second":"companions-duration-input_inputBox--second__Fz08c",labelsRow:"companions-duration-input_labelsRow__7TqYc",checkboxChild:"companions-duration-input_checkboxChild__OygDA"}},6436:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6346,23)),Promise.resolve().then(n.t.bind(n,7924,23)),Promise.resolve().then(n.t.bind(n,5656,23)),Promise.resolve().then(n.t.bind(n,99,23)),Promise.resolve().then(n.t.bind(n,8243,23)),Promise.resolve().then(n.t.bind(n,8827,23)),Promise.resolve().then(n.t.bind(n,2763,23)),Promise.resolve().then(n.t.bind(n,7173,23))},6486:(e,t,n)=>{"use strict";n.d(t,{C5:()=>i,CZ:()=>d,Et:()=>s,Iy:()=>o,So:()=>r,Vf:()=>g,Yd:()=>c,bc:()=>x,gK:()=>h,n5:()=>l,nY:()=>u,pH:()=>m,q0:()=>a,tu:()=>p});let r=4,s=1,a=0,i=100;var l=function(e){return e.FormPage="/",e.CatalogPage="/catalog",e}(l||{});let o={DIRECTIONS:"НАПРАВЛЕНИЯ",TRAVELERS:"ПОПУТЧИКИ"};var u=function(e){return e.EROUPE="Европа",e.ASIA="Азия",e.AMERICA="Америка",e.ISLANDS="Острова",e}(u||{}),c=function(e){return e.CATALOG="/catalog",e.COUNTRIES="/countries",e.ITINERARY="/itinerary",e}(c||{});let d={BASE_URL:"http://localhost:5001",API_TIMEOUT:5e3},p={ROCK:"Тяжёлый рок",RAP:"Русский рэп",DANCE:"Евроденс"},m={FITNESS:"Спортзал",RAP:"Кальян",LAZYBONE:"Диван"},h={MEAT:"Мясоед",HEALTH:"Сидит на ПП",VEGAN:"Веган-сыроед"},x={AIRPLANE:"Самолёт",CAR:"Автомобиль",BIKE:"Велосипед",NONE:"Пешком"},g=["Australia.svg","Belgium.svg","Bosnia and Herzegovina.svg","Czechia.svg","Dominica.svg","France.svg","Germany.svg","Seychelles.svg","Sri Lanka.svg","Thailand.svg","UK.svg","USA.svg"]},6695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var r=n(687),s=n(5814),a=n.n(s);let i=function({title:e}){return(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)("img",{src:"/logo_full.svg",alt:"log",className:"logo"})}),(0,r.jsx)("h1",{className:"header-title",children:e})]})};var l=n(3210);n(3946);let o=function(){return(0,r.jsx)("div",{className:"footer",children:(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)("img",{src:"/logo_footer_full.png",alt:"logo",className:"logo"})})})};var u=n(6189),c=n(6486),d=n(8198),p=n(1060),m=n(6446),h=n(5264);let x=(0,m.HY)({TRIPMATES:h.Ph.reducer}),g=p.A.create({baseURL:c.CZ.BASE_URL,timeout:c.CZ.API_TIMEOUT}),_=()=>(0,d.U1)({reducer:x,middleware:e=>e({thunk:{extraArgument:g}})});var f=n(4864);function v({children:e}){let t=(0,l.useRef)(null);return t.current||(t.current=_()),(0,r.jsx)(f.Kq,{store:t.current,children:e})}let j=function({children:e}){let t=(0,u.usePathname)()===c.n5.FormPage?c.Iy.DIRECTIONS:c.Iy.TRAVELERS;return(0,r.jsxs)("html",{lang:"ru",children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("meta",{charSet:"UTF-8"}),(0,r.jsx)("link",{rel:"icon",type:"svg+xml",href:"/logo_full.svg"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("title",{children:"Поехали"})]}),(0,r.jsxs)("body",{children:[(0,r.jsx)("header",{children:(0,r.jsx)(i,{title:t})}),(0,r.jsx)(v,{children:(0,r.jsx)("main",{children:e})}),(0,r.jsx)("footer",{children:(0,r.jsx)(o,{})})]})]})}},7299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>et});var r=n(687),s=n(3210),a=n(6189),i=n(6486);let l=["ДАТЫ","МАРШРУТ","РАЗВЛЕЧЕНИЯ"];var o=n(3594),u=n.n(o),c=n(1821),d=n.n(c),p=n(4850);function m({handler:e,flag:t}){return(0,r.jsxs)("button",{className:`${d().nextButton} ${t?d().disabledButton:""}`,onClick:e,disabled:t,children:["Следующий шаг",(0,r.jsx)("img",{src:"/Polygon_next.svg",alt:"arrow"})]})}function h({handler:e}){return(0,r.jsxs)("button",{className:d().prevButton,onClick:e,children:[(0,r.jsx)("img",{src:"/Polygon_prev.svg",alt:"arrow"}),"На шаг назад"]})}function x({handler:e,flag:t}){return(0,r.jsxs)("button",{className:d().nextButton,onClick:e,disabled:t,children:["Отправить",(0,r.jsx)("img",{src:"/Polygon_next.svg",alt:"arrow"})]})}let g=function({handlerNextStep:e,handlerPrevStep:t,handlerSubmit:n,firstStep:s,lastStep:a,formData:i,isSubmitting:l}){let{startDate:o,finishDate:u,tripDuration:c,tripmatesCount:g,itinerary:_}=i,f=(0,p.NL)(i.startDate,i.finishDate)!==i.tripDuration,v=""===o||""===u||0===c||0===g||f;return(0,r.jsxs)("div",{className:`${d().buttonWrapper} ${f?d().errorSpan:""}`,children:[f&&!i.tripDuration&&(0,r.jsx)("span",{children:"дата и длительность должны совпадать"}),s&&(0,r.jsx)(m,{handler:e,flag:v}),!s&&!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{handler:e,flag:_.length<1}),(0,r.jsx)(h,{handler:t})]}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{handler:n,flag:l}),(0,r.jsx)(h,{handler:t})]})]})};n(9696);let _=function({selectedDate:e,onDateSelect:t,events:n={},startDate:a,finishDate:i}){let[l,o]=(0,s.useState)(new Date),u=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),c=e=>{let t=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===t?6:t-1},d=e=>{let n=new Date;n.setDate(n.getDate()+1),n.setHours(0,0,0,0),!(e<n)&&t&&t(e)},p=e=>{let t=new Date;return t.getDate()===e&&t.getMonth()===l.getMonth()&&t.getFullYear()===l.getFullYear()},m=t=>!!e&&e.getDate()===t&&e.getMonth()===l.getMonth()&&e.getFullYear()===l.getFullYear(),h=(e,t=0)=>{if(!a||!i)return!1;let n=new Date(l.getFullYear(),l.getMonth()+t,e),[r,s,o]=a.split("-").map(Number),u=new Date(r,s-1,o),[c,d,p]=i.split("-").map(Number),m=new Date(c,d-1,p);return n>=u&&n<=m},x=(e,t=0)=>{if(!a)return!1;let n=new Date(l.getFullYear(),l.getMonth()+t,e),[r,s,i]=a.split("-").map(Number),o=new Date(r,s-1,i);return n.getTime()===o.getTime()},g=(e,t=0)=>{if(!i)return!1;let n=new Date(l.getFullYear(),l.getMonth()+t,e),[r,s,a]=i.split("-").map(Number),o=new Date(r,s-1,a);return n.getTime()===o.getTime()},_=e=>{let t=new Date(l.getFullYear(),l.getMonth(),e).getDay();return 0===t||6===t},f=(e,t=0)=>{let r=new Date(l.getFullYear(),l.getMonth()+t,e),s=r.getFullYear(),a=r.getMonth()+1,i=r.getDate();for(let e of[`${s}-${a}-${i}`,`${s}-${a.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`,`${a}-${i}`,`${a.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`])if(n[e])return n[e];return null};return(0,r.jsxs)("div",{className:"calendar",children:[(0,r.jsxs)("div",{className:"calendar-header",children:[(0,r.jsx)("button",{className:"nav-button",onClick:()=>{o(new Date(l.getFullYear(),l.getMonth()-1))},children:"‹"}),(0,r.jsxs)("h2",{className:"month-year",children:[["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][l.getMonth()]," ",l.getFullYear()]}),(0,r.jsx)("button",{className:"nav-button",onClick:()=>{o(new Date(l.getFullYear(),l.getMonth()+1))},children:"›"})]}),(0,r.jsx)("div",{className:"calendar-weekdays",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,r.jsx)("div",{className:"weekday",children:e},e))}),(0,r.jsx)("div",{className:"calendar-grid",children:(()=>{let e=u(l),t=c(l),n=[],s=new Date(l.getFullYear(),l.getMonth()-1),a=new Date(l.getFullYear(),l.getMonth()+1),i=u(s),o=new Date;o.setDate(o.getDate()+1),o.setHours(0,0,0,0);for(let e=t-1;e>=0;e--){let t=i-e,a=new Date(s.getFullYear(),s.getMonth(),t),l=a<o,u=h(t,-1),c=x(t,-1),p=g(t,-1),m=f(t,-1);n.push((0,r.jsxs)("div",{className:`calendar-day prev-month ${l?"past-date":""} ${u?"in-range":""} ${c?"range-start":""} ${p?"range-end":""} ${m?"has-event":""}`,onClick:()=>!l&&d(a),children:[(0,r.jsx)("span",{className:"day-number",children:t}),m&&(0,r.jsx)("span",{className:"event-text",children:m})]},`prev-${t}`))}for(let t=1;t<=e;t++){let e=f(t,0),s=new Date(l.getFullYear(),l.getMonth(),t),a=s<o,i=h(t,0),u=x(t,0),c=g(t,0);n.push((0,r.jsxs)("div",{className:`calendar-day current-month ${p(t)?"today":""} ${m(t)?"selected":""} ${_(t)?"weekend":""} ${e?"has-event":""} ${a?"past-date":""} ${i?"in-range":""} ${u?"range-start":""} ${c?"range-end":""}`,onClick:()=>!a&&d(s),children:[(0,r.jsx)("span",{className:"day-number",children:t}),e&&(0,r.jsx)("span",{className:"event-text",children:e})]},t))}let v=7*Math.ceil((t+e)/7)-(t+e);for(let e=1;e<=v;e++){let t=new Date(a.getFullYear(),a.getMonth(),e),s=t<o,i=h(e,1),l=x(e,1),u=g(e,1),c=f(e,1);n.push((0,r.jsxs)("div",{className:`calendar-day next-month ${s?"past-date":""} ${i?"in-range":""} ${l?"range-start":""} ${u?"range-end":""} ${c?"has-event":""}`,onClick:()=>!s&&d(t),children:[(0,r.jsx)("span",{className:"day-number",children:e}),c&&(0,r.jsx)("span",{className:"event-text",children:c})]},`next-${e}`))}return n})()})]})};var f=n(3335),v=n.n(f);let j=function({activePoint:e}){return(0,r.jsx)("ul",{className:v().points,children:l.map(t=>(0,r.jsx)("li",{className:t===e?v().isActive:"",children:t},t))})};var b=n(5955),y=n.n(b);let N=function({tripDuration:e,tripmatesCount:t,onChangeDuration:n,onChangeTrimates:s}){return(0,r.jsxs)("div",{className:y().inputsContainer,children:[(0,r.jsx)("div",{className:y().inputRow,children:(0,r.jsxs)("div",{className:y().inputWrapper,children:[(0,r.jsx)("span",{className:y().labelText,children:"ИЩУ ПОПУТЧИКОВ:"}),(0,r.jsxs)("div",{className:y().inputBox,children:[(0,r.jsx)("button",{type:"button",onClick:()=>{t>0&&s(t-1)},disabled:t<=0,children:"-"}),(0,r.jsx)("input",{type:"number",name:"tripmates",value:t,max:999,min:0,onFocus:e=>{e.target.select()},onChange:e=>{let t=e.target.value;if(""===t)return void s(0);let n=Number(t);!isNaN(n)&&n>=0&&n<=999&&s(n)}}),(0,r.jsx)("button",{type:"button",onClick:()=>{t<999&&s(t+1)},disabled:t>=999,children:"+"})]}),(0,r.jsx)("span",{className:y().labelText,children:"чел."})]})}),(0,r.jsx)("div",{className:y().inputRow,children:(0,r.jsxs)("div",{className:y().inputWrapper,children:[(0,r.jsx)("span",{className:y().labelText,children:"ДЛИТЕЛЬНОСТЬ:"}),(0,r.jsxs)("div",{className:`${y().inputBox} ${y()["inputBox--second"]}`,children:[(0,r.jsx)("button",{type:"button",onClick:()=>{e>0&&n(e-1)},disabled:e<=0,children:"-"}),(0,r.jsx)("input",{type:"number",name:"duration",value:e,max:999,min:0,onFocus:e=>{e.target.select()},onChange:e=>{let t=e.target.value;if(""===t)return void n(0);let r=Number(t);!isNaN(r)&&r>=0&&r<=999&&n(r)}}),(0,r.jsx)("button",{type:"button",onClick:()=>{e<999&&n(e+1)},disabled:e>=999,children:"+"})]}),(0,r.jsx)("span",{className:y().labelText,children:"дн."})]})})]})},C=function({tripDuration:e,tripmatesCount:t,isChildrenAccepted:n,updateFormData:s}){let a=e=>{s({isChildrenAccepted:e})};return(0,r.jsxs)("div",{className:y().inputTripmates,children:[(0,r.jsx)(N,{tripDuration:e,tripmatesCount:t,onChangeDuration:e=>{s({tripDuration:e})},onChangeTrimates:e=>{s({tripmatesCount:e})}}),(0,r.jsx)("div",{className:y().checkboxChild,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"children",checked:n,onChange:e=>a(e.target.checked)}),"Можно с детьми"]})})]})},D=function({currentPoint:e,formData:t,updateFormData:n}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:u().titleWrapper,children:[(0,r.jsxs)("div",{className:u().titleBox,children:[(0,r.jsx)("h1",{className:u().stepTitle,children:"Шаг 1. Даты пребывания"}),(0,r.jsxs)("p",{className:u().stepDescription,children:["Укажите предпочтительное количество попутчиков, которых",(0,r.jsx)("br",{}),"вы хотели бы позвать в поездку, и ее предполагаемую длительность."]})]}),(0,r.jsx)(j,{activePoint:e})]}),(0,r.jsx)(C,{isChildrenAccepted:t.isChildrenAccepted,tripDuration:t.tripDuration,tripmatesCount:t.tripmatesCount,updateFormData:n}),(0,r.jsx)(_,{events:(()=>{let e={};if(t.startDate){let[n,r,s]=t.startDate.split("-").map(Number);e[`${n}-${r}-${s}`]="Заезд"}if(t.finishDate){let[n,r,s]=t.finishDate.split("-").map(Number);e[`${n}-${r}-${s}`]="Выезд"}return e})(),onDateSelect:e=>{let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),i=`${r}-${s}-${a}`;if(t.startDate){let[r,s,a]=t.startDate.split("-").map(Number);e<new Date(r,s-1,a)||t.finishDate?n({startDate:i,finishDate:""}):n({finishDate:i})}else n({startDate:i,finishDate:""})},selectedDate:(()=>{if(t.startDate){let[e,n,r]=t.startDate.split("-").map(Number);return new Date(e,n-1,r)}})(),startDate:t.startDate,finishDate:t.finishDate})]})};var P=n(5471),w=n(353),S=n(1073),T=n(9371),k=n.n(T),A=n(7811),$=n.n(A);let B=["А","Б","В","Г","Д","Е","З","И","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ч","Ш","Э","Ю","Я"],E=function({selectedLetter:e,onLetterSelect:t}){return(0,r.jsx)("div",{className:$().alphabetFilter,children:B.map(n=>(0,r.jsx)("button",{className:`${$().letterButton} ${e===n?$().active:""}`,onClick:()=>t(e===n?"":n),type:"button",children:n},n))})};var I=n(1426),R=n.n(I),F=n(8697),M=n.n(F),L=n(9662),Y=n.n(L);let O=function({countryName:e,position:t,handleRemoveCountry:n,currentPoint:s,hasNextItem:a,isLast:i}){let o=Y()({[M().flagContainerStepTwo]:s===l[1],[M().flagContainerStepThre]:s===l[2]&&s!==l[1]},{[M().hasConnection]:a,[M().isLast]:i});return(0,r.jsxs)("div",{className:o,children:[s===l[2]&&(0,r.jsx)("label",{htmlFor:`${t}`,children:e}),""!==e&&(0,r.jsxs)("div",{className:M().flagBox,children:[(0,r.jsx)("div",{className:M().marker}),(0,r.jsx)("img",{className:M().flagImage,src:"https://flagcdn.com/un.svg",alt:`Флаг ${e}`})]}),s===l[1]&&(0,r.jsxs)("div",{className:`${""===e?M().notSelected:""}`,children:[""===e&&(0,r.jsx)("div",{className:`${M().notSelectedMarker}`}),(0,r.jsx)("button",{className:M().removeButton,onClick:n,type:"button",title:"Удалить выбранную страну",children:(0,r.jsxs)("svg",{className:M().closeIcon,width:"26px",height:"28px",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("line",{x1:"16",y1:"16",x2:"48",y2:"48"}),(0,r.jsx)("line",{x1:"48",y1:"16",x2:"16",y2:"48"})]})})]})]})},q=function({selectedCountry:e,handleToggleOpen:t,handleRemoveCountry:n,placeholder:s,currentPoint:a,hasNextItem:i,isLast:l,position:o}){return(0,r.jsxs)("div",{className:R().inputContainer,children:[(0,r.jsxs)("button",{className:R().input,onClick:t,type:"button",children:[e?(0,r.jsx)("div",{className:R().selectedCountry,children:(0,r.jsx)("span",{className:R().name,children:e.name})}):(0,r.jsx)("span",{className:R().placeholder,children:s}),(0,r.jsx)("span",{className:R().arrow,children:"▼"})]}),(0,r.jsx)(O,{countryName:e?e.name:"",handleRemoveCountry:n,currentPoint:a,hasNextItem:i,isLast:l,position:o})]})},U=function({handleOpenClose:e,index:t}){return(0,r.jsx)("button",{className:R().closeButton,onClick:()=>e(t,!1),type:"button",children:"\xd7"})},G=function({country:e,handleCountrySelect:t}){return(0,r.jsx)("button",{className:R().countryItem,onClick:()=>t(e),type:"button",children:(0,r.jsx)("span",{className:R().name,children:e.name})},e.name)},W=function({countries:e,selectedCountry:t,onSelect:n,onRemove:a,placeholder:i="Выберите страну",isOpen:l,onOpenClose:o,currentPoint:u,hasNextItem:c,isLast:d,position:p}){let[m,h]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),_=(0,s.useRef)(null),f=e?.filter(e=>{let t=e.name?.toLowerCase().includes(m.toLowerCase()),n=!x||e.name?.startsWith(x);return t&&n}),v=e=>{n(e),o(!1),h(""),g("")};return(0,r.jsxs)("div",{className:k().dropdown,ref:_,children:[(0,r.jsx)(q,{handleToggleOpen:()=>{o(!l)},handleRemoveCountry:()=>{a()},placeholder:i,selectedCountry:t,currentPoint:u,hasNextItem:c,isLast:d,position:p}),l&&(0,r.jsxs)("div",{className:k().dropdownContent,children:[(0,r.jsxs)("div",{className:k().header,children:[(0,r.jsx)("h3",{className:k().title,children:"ВЫБЕРИТЕ СТРАНУ"}),(0,r.jsx)(U,{handleOpenClose:()=>o(!1),index:p})]}),(0,r.jsxs)("div",{className:k().countryBox,children:[(0,r.jsx)(E,{selectedLetter:x,onLetterSelect:g}),(0,r.jsx)("div",{className:k().countriesList,children:f?.map(e=>(0,r.jsx)(G,{country:e,handleCountrySelect:v},e.name))})]})]})]})},z=function({onCountriesChange:e,countries:t,currentPoint:n,initialItinerary:a=[]}){let[i,l]=(0,s.useState)([null]),[o,u]=(0,s.useState)([!1]),[c,d]=(0,s.useState)(!1),p=(t,n)=>{let r=[...i];r[n]={country:t.name,position:n+1},r.every(e=>null!==e)&&(r.push(null),u(e=>[...e,!1])),l(r);let s=r.filter(e=>null!==e);e?.(s)},m=t=>{let n=[...i];for(n[t]=null;n.length>1&&null===n[n.length-1];)n.pop();n.some(e=>null!==e)||0!==n.length||n.push(null),0===n.length&&n.push(null);let r=n.map((e,t)=>e?{...e,position:t+1}:null);l(r),u(e=>e.slice(0,r.length));let s=r.filter(e=>null!==e);e?.(s)},h=(e,t)=>{u(n=>{let r=[...n];return r[e]=t,r})},x=e=>{let n=i.map((t,n)=>n!==e?t?.country:null).filter(Boolean);return t?.filter(e=>!n.includes(e.name))},g=e=>{let n=i[e];if(n)return t?.find(e=>e.name===n.country)};return(0,r.jsx)("div",{className:k().container,children:i.map((e,t)=>(0,r.jsx)(W,{countries:x(t),selectedCountry:g(t),onSelect:e=>p(e,t),onRemove:()=>m(t),placeholder:0===t?"Выберите страну":"Добавить еще страну",currentPoint:n,position:t+1,isOpen:o[t]||!1,onOpenClose:e=>h(t,e),hasNextItem:t<i.length-1,isLast:t===i.length-2},t))})},H=function({currentPoint:e,countries:t,updateFormData:n,formData:s}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:u().titleWrapper,children:[(0,r.jsxs)("div",{className:u().titleBox,children:[(0,r.jsx)("h1",{className:u().stepTitle,children:"Шаг 2. Маршрут"}),(0,r.jsxs)("p",{className:u().stepDescription,children:["Укажите страны, которые вы хотели бы посетить.",(0,r.jsx)("br",{}),"Это может быть одна или сразу несколько."]})]}),(0,r.jsx)(j,{activePoint:e})]}),(0,r.jsx)(z,{onCountriesChange:e=>{n({itinerary:e})},countries:t,currentPoint:e,initialItinerary:s.itinerary})]})};var K=n(2837),V=n.n(K);let Z=function({itinerary:e,currentPoint:t,hasNextItem:n,isLast:s,onDescriptionChange:a}){return(0,r.jsx)("div",{className:V().container,children:(0,r.jsxs)("div",{className:V().inputBox,children:[(0,r.jsx)(O,{countryName:e.country,position:e.position,currentPoint:t,hasNextItem:n,isLast:s}),(0,r.jsx)("textarea",{placeholder:"План действий",name:"description",id:`${e.position}`,minLength:1,maxLength:500,value:e.description||"",onChange:t=>{let n=t.target.value;a(e.position,n)}})]})})},X=function({itineraries:e,currentPoint:t,updateFormData:n}){let s=(t,r)=>{n({itinerary:e.map(e=>e.position===t?{...e,description:r}:e)})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:u().titleWrapper,children:[(0,r.jsxs)("div",{className:u().titleBox,children:[(0,r.jsx)("h1",{className:u().stepTitle,children:"Шаг 3. Развлечения"}),(0,r.jsxs)("p",{className:u().stepDescription,children:["Наконец, расскажите о своих планах времяпровождения.",(0,r.jsx)("br",{}),"Можно писать в свободной форме и ставить тэги."]})]}),(0,r.jsx)(j,{activePoint:t})]}),e.map((n,a)=>(0,r.jsx)(Z,{itinerary:n,currentPoint:t,hasNextItem:a<e.length-1,isLast:a===e.length-1,onDescriptionChange:s},`${n.position}-${e.length}`))]})};var Q=n(5264);let J={tripmatesCount:0,tripDuration:0,isChildrenAccepted:!1,startDate:"",finishDate:"",itinerary:[]},ee=function(){let e=(0,a.useRouter)();(0,P.CU)();let t=(0,P.jL)(),[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(J),[p,m]=(0,s.useState)(l[0]),h=l.indexOf(p),x=h===l.length-1,_=(0,P.GV)(w.X6),f=e=>{d(t=>({...t,...e}))},v=async()=>{try{o(!0);let[,n]=await Promise.all([t((0,Q.w4)(c)),t((0,S.Le)(c))]);S.Le.fulfilled.match(n)?e.push(i.n5.CatalogPage):console.error("Ошибка при отправке данных маршрута:",n.error)}catch(e){console.error("Неожиданная ошибка при отправке формы:",e)}finally{o(!1)}};return(0,r.jsx)("div",{className:u().formLayout,children:(0,r.jsxs)("div",{className:u().formWrapper,children:[(()=>{switch(h){case 0:return(0,r.jsx)(D,{updateFormData:f,formData:c,currentPoint:p});case 1:return(0,r.jsx)(H,{updateFormData:f,countries:_,currentPoint:p,formData:c});case 2:return(0,r.jsx)(X,{itineraries:c.itinerary,currentPoint:p,updateFormData:f});default:return null}})(),(0,r.jsx)(g,{handlerNextStep:()=>{h<l.length-1&&m(l[h+1])},handlerPrevStep:()=>{h>0&&m(l[h-1])},handlerSubmit:v,firstStep:0===h,lastStep:x,formData:c,isSubmitting:n})]})})},et=function(){return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsx)("h1",{className:"title-form",children:"Добавить палан:"}),(0,r.jsx)(ee,{})]})}},7811:e=>{e.exports={alphabetFilter:"alphabet-filter_alphabetFilter__UAbcG",letterButton:"alphabet-filter_letterButton__Q1fGE",active:"alphabet-filter_active__dwcmq"}},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8444:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/page.tsx","default")},8508:(e,t,n)=>{Promise.resolve().then(n.bind(n,9559))},8697:e=>{e.exports={flagBox:"flag-box_flagBox__vMXU6",flagImage:"flag-box_flagImage__wVv8b",flagContainerStepTwo:"flag-box_flagContainerStepTwo__Ii0mn",hasConnection:"flag-box_hasConnection__V_NRn",isLast:"flag-box_isLast__Rpjp1",flagContainerStepThre:"flag-box_flagContainerStepThre__MykLp",notSelected:"flag-box_notSelected__X7EEg",notSelectedMarker:"flag-box_notSelectedMarker__yFrmU",marker:"flag-box_marker__oQczj",removeButton:"flag-box_removeButton__bT2KX",closeIcon:"flag-box_closeIcon__l_PM1"}},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9371:e=>{e.exports={container:"select-country-input_container__LHjym",dropdown:"select-country-input_dropdown__NlXz_",dropdownContent:"select-country-input_dropdownContent__xK05W",header:"select-country-input_header__9yUWR",title:"select-country-input_title__J1s2s",countryBox:"select-country-input_countryBox__8ui_g",countriesList:"select-country-input_countriesList__FX4zF"}},9551:e=>{"use strict";e.exports=require("url")},9559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karen/Desktop/lets-go/letsGO/apps/frontend/app/(main)/layout.tsx","default")},9696:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[825,306],()=>n(1237));module.exports=r})();